@using QuanLyBanHang.Data.Entities
@using QuanLyBanHang.BlazorServer
@inject ICustomerService CustomerService
@rendermode InteractiveServer

<link href="css/custumerAdd.css" rel="stylesheet" />

<div class="customer-add-container">
    <h2 class="customer-add-title">Thêm khách hàng</h2>

    <EditForm Model="Customer" OnValidSubmit="HandleSubmit"
              class="customer-add-form">

        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="customer-add-field">
            <label>Tên:</label>
            <InputText class="form-control"
                       @bind-Value="Customer.FullName" />
            <ValidationMessage For="@(() => Customer.FullName)" />
        </div>

        <div class="customer-add-field">
            <label>Email:</label>
            <InputText class="form-control"
                       @bind-Value="Customer.Email" />
            <ValidationMessage For="@(() => Customer.Email)" />
        </div>

        <div class="customer-add-field">
            <label>Điện thoại:</label>
            <InputText class="form-control"
                       @bind-Value="Customer.Phone" />
            <ValidationMessage For="@(() => Customer.Phone)" />
        </div>

        <div class="customer-add-field">
            <label>Địa chỉ:</label>
            <InputText class="form-control"
                       @bind-Value="Customer.Address" />
            <ValidationMessage For="@(() => Customer.Address)" />
        </div>

        <div class="customer-add-actions">
            <button type="submit" class="customer-add-btn-save">
                Lưu
            </button>

            <button type="button"
                    class="customer-add-btn-back"
                    @onclick="Cancel">
                Quay lại
            </button>
        </div>
    </EditForm>
</div>

@code {
    [Parameter] public EventCallback OnSaved { get; set; }
    [Parameter] public EventCallback OnCancel { get; set; }

    Customer Customer { get; set; } = new();

    async Task HandleSubmit()
    {
        await CustomerService.CreateAsync(Customer);
        await OnSaved.InvokeAsync();
    }

    async Task Cancel()
    {
        await OnCancel.InvokeAsync();
    }
}