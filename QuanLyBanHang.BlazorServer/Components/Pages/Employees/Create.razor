@page "/employees/create"
@inject IEmployeeService EmployeeService
@inject NavigationManager Navigation

<h3>➕ Thêm nhân viên</h3>

<EditForm Model="employee" OnValidSubmit="Save">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Họ tên</label>
        <InputText class="form-control" @bind-Value="employee.FullName" />
    </div>

    <div class="mb-3">
        <label>Email</label>
        <InputText class="form-control" @bind-Value="employee.Email" />
    </div>

    <div class="mb-3">
        <label>Số điện thoại</label>
        <InputText class="form-control" @bind-Value="employee.Phone" />
    </div>

    <div class="mb-3">
        <label>Mật khẩu</label>
        <InputText class="form-control" type="password"
                   @bind-Value="password" />
    </div>

    <div class="mb-3">
        <label>Vai trò</label>
        <InputSelect class="form-select" @bind-Value="employee.Role">
            <option value="Staff">Nhân viên</option>
            <option value="Admin">Quản trị</option>
        </InputSelect>
    </div>

    <button class="btn btn-success">Lưu</button>
    <a class="btn btn-secondary" href="/employees">Hủy</a>
</EditForm>

@code {
    Employee employee = new();
    string password = "";

    private async Task Save()
    {
        await EmployeeService.CreateAsync(employee, password);
        Navigation.NavigateTo("/employees"); // ✅ BẮT BUỘC có URL
    }
}
